Задача №1
X,Y - случайные величины с нормальным распределением: X~N(e1,q1^2) , Y~N(e2,q2^2)
corr(X,Y) = p
S = aX+bY (a и b - const)
( a+b = 1 , 0<=a<=1, 0<=b<=1 ) 
Какие a и b надо выбрать, чтобы минимизировать var[S] ?


Задача №2
Кандидату предлагается проанализировать в jupyter notebook наши сделки на основе логов, собранных с торговли.
1.В файл market_logs записаны рыночные сделки (не наши)
Момент времени/ цена / объём трейда, сторона сделки (-1 агрессивный sell, +1 агрессивный buy) и состояние стакана после совершения сделки (volume_bid@bid_price x ask_price@volume_ask)

p.s. здесь bid - лучшая (max по цене) заявка на покупку, ask - лучшая (min по цене) заявка на продажу.Данные ценовые уровни еще называются топ уровни. 
Агрессивный трейд - трейд по цене bid уровня (агрессивный sell) или по цене ask уровня (агрессивный buy)

2.Мы выставляем лимитные ордера в стакан и ожидаем когда они исполнятся. Файл exec_logs содержит информацию по нашим сделкам.
side - {+1 - ордер исполняется на биде (наша buy сделка), -1 - ордер исполняется на аске (наша sell сделка)}
price - цена сделки
traded volume - объём сделки
volume_left - объем на топ уровне (на котором мы раннее стояли) после исполнения нашего ордера
delta_execsend - время между отправкой лимитного ордера на биржу и его исполнением

Для оценки качества наших трейдов необходимо посчитать 
dmid5 = ( (mid_price через 5 секунд) - цена нашей сделки(price) ) * направление сделки(side)
mid_price = (ask_price + bid_price)/2 

Вопрос:
Какое значение корреляции между dmid5 и delta_execsend?


Время на выполнение заданий - 7 дней. 
Ответы на задания присылайте на почту sm@orions.ch в следующем формате.


Ответ на задание №1: 

S ~ N(a*e1+b*e2, (a*q1)^2+(b*q2)^2+2*p*a*q1*b*q2)

var[S] = (a*q1)^2+(b*q2)^2+2*p*a*q1*b*q2

подставим b = 1 - a

var[S] = (a*q1)^2+((1 - a)*q2)^2+2*p*a*q1*(1 - a)*q2

Чтобы найти минимум, возьмем производную var[S] по a и приравняем к нулю:

(var[S])' = 2*a*q1^2 + 2*(a-1)*q2^2 + 2*p*q1*q2*(1 - 2*a) = 0

находим a:

2*a*q1^2 + 2*a*q2^2 - 2*q2^2 + 2*p*q1*q2 - 2*p*q1*q2*2*a = 0
a*q1^2 + a*q2^2 - q2^2 + p*q1*q2 - p*q1*q2*2*a = 0
a*(q1^2 + q2^2 - 2*p*q1*q2) =  q2^2 - p*q1*q2

Ответ:

a = (q2 - p*q1)*q2 / (q1^2+q2^2 - 2*p*q1*q2), 

b = 1 - a


Ответ на задание №2: ответ на вопрос (число) + ссылка на jupyter notebook

Ответ: 0.02288 - корреляция по Пирсону

Ссылка на ноутбук: https://github.com/allesid/orion_test/blob/main/task2.ipynb



